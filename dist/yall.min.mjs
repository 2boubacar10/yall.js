/*yall.js 3.1.0*/
export default function(e){const t=(e=e||{}).lazyClass||"lazy",o=e.lazyBackgroundClass||"lazy-bg",r="idleLoadTimeout"in e?e.idleLoadTimeout:200,s=e.observeChanges||!1,n=`img.${t},video.${t},iframe.${t},.${o}`,i=e.events||{},l=e=>[].slice.call(e),a=t=>{const r=t.parentNode;let s;"PICTURE"==r.nodeName&&(s=l(r.querySelectorAll("source"))),"VIDEO"==t.nodeName&&(s=l(t.querySelectorAll("source")));for(let e in s)d(s[e]);d(t),t.autoplay&&t.load(),t.classList.contains(o)&&(t.classList.remove(o),t.classList.add(e.lazyBackgroundLoaded||"lazy-bg-loaded"))},c=(e,t)=>{e.observe(t),Object.keys(i).forEach(e=>{t.addEventListener(e,i[e].listener||i[e],i[e].options||void 0)})},d=e=>{["srcset","src","poster"].forEach(t=>{t in e.dataset&&(e[t]=e.dataset[t])})};let u=l(document.querySelectorAll(n));if(/(google|bing|yandex|duckduck)bot/i.test(navigator.userAgent))for(let e in u)a(u[e]);else if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var b=new IntersectionObserver((e,o)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;"requestIdleCallback"in window&&r?requestIdleCallback(()=>{a(n)},{timeout:r}):a(n),n.classList.remove(t),o.unobserve(n),(u=u.filter(e=>e!=n)).length||s||b.disconnect()}})},{rootMargin:`${"threshold"in e?e.threshold:200}px 0%`});for(let e in u)c(b,u[e]);"MutationObserver"in window&&s&&new MutationObserver(()=>{l(document.querySelectorAll(n)).forEach(e=>{u.indexOf(e)<0&&(u.push(e),c(b,e))})}).observe(document.querySelector(e.observeRootSelector||"body"),e.mutationObserverOptions||{childList:!0,subtree:!0})}}
