/*yall.js 3.0.0*/
export default function(e){e||(e={});const t="IntersectionObserver"in window&&"IntersectionObserverEntry"in window,o=e.lazyClass||"lazy",r=e.lazyBackgroundClass||"lazy-bg",s="idleLoadTimeout"in e?e.idleLoadTimeout:100,n=e.observeChanges||!1,l=`img.${o},video.${o},iframe.${o},.${r}`,a=e=>[].slice.call(e),i=t=>{const o=t.parentNode;let s;"PICTURE"==o.nodeName&&(s=a(o.querySelectorAll("source"))),"VIDEO"==t.nodeName&&(s=a(t.querySelectorAll("source")));for(let e in s)c(s[e]);c(t),t.autoplay&&t.load(),t.classList.contains(r)&&(t.classList.remove(r),t.classList.add(e.lazyBackgroundLoaded||"lazy-bg-loaded"))},c=e=>{["srcset","src","poster"].forEach(t=>{t in e.dataset&&(e[t]=e.dataset[t])})};let d=a(document.querySelectorAll(l));if(/(google|bing|yandex|duckduck)bot/i.test(navigator.userAgent))for(let e in d)i(d[e]);else{if(t){var u=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const r=e.target;"requestIdleCallback"in window&&s?requestIdleCallback(()=>{i(r)},{timeout:s}):i(r),r.classList.remove(o),t.unobserve(r),(d=d.filter(e=>e!=r)).length||n||u.disconnect()}})},{rootMargin:`${"threshold"in e?e.threshold:200}px 0%`});for(let e in d)u.observe(d[e])}"MutationObserver"in window&&n&&new MutationObserver(()=>{a(document.querySelectorAll(l)).forEach(e=>{d.indexOf(e)<0&&t&&(d.push(e),u.observe(e))})}).observe(document.querySelector(e.observeRootSelector||"body"),e.mutationObserverOptions||{childList:!0,subtree:!0})}}
